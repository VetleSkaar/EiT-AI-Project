# EiT-AI-Project

## Practical

A demo project to determine the viability of AI assisted decision making in public procurement workflows. This Proof-of-Concept demo is connected to the final deliverables in _EiT - Innovasjon for en bedre verden_ Spring '26.

This is also meant as a personal exploration of AI-Assisted development and a fair bit of the code will be generated by Copilot.

## Technical

A monorepo project with a FastAPI backend and Vue 3 + Vite frontend. 

## Project Structure

```
EiT-AI-Project/
├── backend/          # FastAPI backend
│   ├── main.py       # Main FastAPI application
│   ├── requirements.txt
│   └── .env.example  # Environment variables template
├── frontend/         # Vue 3 + Vite frontend
│   ├── src/
│   ├── public/
│   └── package.json
└── README.md
```

## Prerequisites

- Python 3.8 or higher
- Node.js 16 or higher
- npm or yarn

## Backend Setup

1. Navigate to the backend directory:
   ```bash
   cd backend
   ```

2. Create a virtual environment:
   ```bash
   python -m venv venv
   ```

3. Activate the virtual environment:
   - On Windows:
     ```bash
     venv\Scripts\activate
     ```
   - On macOS/Linux:
     ```bash
     source venv/bin/activate
     ```

4. Install dependencies:
   ```bash
   pip install -r requirements.txt
   ```

5. Copy `.env.example` to `.env` and configure as needed:
   ```bash
   cp .env.example .env
   ```

6. Run the development server:
   ```bash
   uvicorn main:app --reload
   ```

   The API will be available at http://localhost:8000

## Data Preparation

The backend requires a cleaned procurement notice dataset. Use the provided cleaning script to prepare your data:

### Cleaning Doffin Notices

The `backend/scripts/clean_notices.py` script processes raw procurement notice data and prepares it for use with the application.

**Input formats supported:**
- JSON array file (e.g., `data/notices.json`)
- JSONL file (e.g., `data/notices.jsonl`)

**What the script does:**
- Deduplicates records by notice_id
- Normalizes CPV codes to 8-digit strings
- Normalizes dates to YYYY-MM-DD format
- Creates/trims description excerpts (default max 1200 chars)
- Validates and fills required fields
- Outputs warnings for data quality issues

**Usage:**

```bash
cd backend
python scripts/clean_notices.py --in data/notices.json --out data/notices.cleaned.json
```

Or with JSONL input:

```bash
python scripts/clean_notices.py --in data/notices.jsonl --out data/notices.cleaned.json
```

**Optional parameters:**

```bash
python scripts/clean_notices.py \
  --in data/notices.json \
  --out data/notices.cleaned.json \
  --excerpt-max 1500
```

The script will print a summary of:
- Number of records loaded
- Number of cleaned records written
- Any warnings about data quality (missing fields, duplicates, etc.)

**Note:** The backend will fail to start if `backend/data/notices.cleaned.json` is missing. Always run the cleaning script first when setting up a new environment or updating the dataset.

## Frontend Setup

1. Navigate to the frontend directory:
   ```bash
   cd frontend
   ```

2. Install dependencies:
   ```bash
   npm install
   ```

3. Copy `.env.example` to `.env` and configure as needed:
   ```bash
   cp .env.example .env
   ```
   
   **Note:** In development mode, the Vite dev server automatically proxies API requests to the backend (http://localhost:8000), so you typically don't need to modify the default `.env` settings. The proxy configuration eliminates CORS issues during development.

4. Run the development server:
   ```bash
   npm run dev
   ```

   The frontend will be available at http://localhost:5173

## Development

### Running Both Services

For development, you'll need to run both the backend and frontend servers:

1. In one terminal, start the backend:
   ```bash
   cd backend
   source venv/bin/activate  # or venv\Scripts\activate on Windows
   uvicorn main:app --reload
   ```

2. In another terminal, start the frontend:
   ```bash
   cd frontend
   npm run dev
   ```

### API Documentation

When the backend is running, you can access:
- Swagger UI: http://localhost:8000/docs
- ReDoc: http://localhost:8000/redoc

### CORS Configuration

The backend is configured to allow requests from the Vite dev server (http://localhost:5173). This is configured in `backend/main.py`.

Additionally, the frontend uses a Vite proxy in development mode to forward `/api` requests to the backend at `http://localhost:8000`. This eliminates CORS issues during development. The proxy configuration is in `frontend/vite.config.ts`.

## Building for Production

### Backend
The backend can be run with:
```bash
uvicorn main:app --host 0.0.0.0 --port 8000
```

### Frontend
Build the frontend:
```bash
cd frontend
npm run build
```

The built files will be in `frontend/dist/`.

## License

[Add your license here]